---
title: "Async/Parallel Simulation Dashboard"
format:
  html:
    code-fold: true
    code-summary: "Show code"
    toc: true
    toc-depth: 3
---

# Async Random Walk Simulation Dashboard

This vignette provides documentation for the **fully interactive async/parallel Shiny application** that runs directly in your browser using WebAssembly. Test parallel execution with multiple workers!

## üöÄ Launch the Interactive Dashboard

**[Click here to open the Async Dashboard](../dashboard_async/){.btn .btn-primary .btn-lg}**

The dashboard runs entirely in your browser - no R installation or server required!

## Overview

The async dashboard demonstrates the **parallel processing capabilities** of the `randomwalk` package using the `crew` package for worker management. The simulation runs entirely client-side using WebAssembly technology.

### Key Features

- **Parallel Execution**: Choose 0-4 workers for sync or async mode
- **Performance Metrics**: Compare execution time with different worker counts
- **Real-time Visualization**: View grid state, walker paths, and statistics
- **No Server Required**: Runs entirely in your browser via WebAssembly
- **Package Integration**: Uses the actual `randomwalk` package async functions

### Async vs Sync Mode

- **Sync Mode** (`workers = 0`): Sequential processing, predictable results
- **Async Mode** (`workers > 0`): Parallel processing using `crew` workers
  - Workers process walkers independently
  - Potential speedup with multiple CPU cores
  - Results may differ slightly (workers use static grid snapshots)

## Architecture

The async dashboard extends the sync dashboard with parallel processing capabilities:

### Async Parameters

**Number of Workers**: 0-4 workers
- 0 workers = Sync mode (baseline for comparison)
- 1+ workers = Async mode (parallel execution)
- More workers may improve performance (up to CPU core limit)

### Async Execution Model

1. **Worker Initialization**: `crew` spawns requested number of R worker processes
2. **Task Distribution**: Walkers distributed across workers
3. **Independent Processing**: Each worker processes assigned walkers using static grid snapshot
4. **Result Collection**: Main process collects completed walker results
5. **Resource Cleanup**: Workers terminated after simulation completes

### Performance Metrics

The Performance tab shows:
- Execution mode (sync vs async)
- Number of workers used
- Elapsed time
- Steps per second throughput
- Performance analysis and speedup estimation

## Usage Examples

### Testing Async Performance

1. **Baseline**: Run with `workers = 0` (sync mode)
2. **Note timing**: Check elapsed time in Performance tab
3. **Scale up**: Increase workers to 2, then 4
4. **Compare**: Observe speedup in Performance tab

### Optimal Worker Count

- **Small simulations**: 1-2 workers (overhead dominates)
- **Medium simulations**: 2-4 workers (good speedup)
- **Large simulations**: 4+ workers (max speedup)
- **Rule of thumb**: Don't exceed number of CPU cores

### Expected Results

- **Sync vs Async**: Results may differ (static snapshots)
- **Speedup**: Typically 1.5-2x with 2 workers
- **Variability**: Speedup depends on walker termination patterns
- **Overhead**: Some overhead from worker management

## Technical Details

### Static Snapshot Architecture

Workers operate on frozen grid state:

**Pros:**
- ‚úÖ No serialization issues
- ‚úÖ Simple, reliable implementation
- ‚úÖ Fast worker execution

**Cons:**
- ‚ö†Ô∏è Workers don't see real-time updates
- ‚ö†Ô∏è Results may differ from sync mode
- ‚ö†Ô∏è Some walker interactions missed

### Why Results Differ

**Sync mode example:**
1. Walker A terminates at (5,5) ‚Üí pixel becomes black
2. Walker B sees black pixel at (5,5)
3. Walker B terminates early when near (5,5)
4. Result: 2 black pixels

**Async mode example:**
1. Worker 1: Walker A terminates at (5,5)
2. Worker 2: Walker B doesn't see (5,5) is black
3. Walker B continues until termination at (7,8)
4. Result: 3 black pixels

This is **expected behavior** and doesn't indicate a bug.

## See Also

- [Sync Dashboard](../dashboard/) - Sync-only dashboard
- `vignette("telemetry")` - Pipeline statistics
- `?run_simulation` - Core simulation function (`workers` parameter)
- [crew Package](https://wlandau.github.io/crew/) - Distributed worker launcher

## Summary

This async dashboard provides:

- **Parallel Execution**: Test async performance with multiple workers
- **Performance Metrics**: Compare sync vs async timing
- **Interactive Testing**: Adjust worker count in real-time
- **Educational**: Understand async/parallel random walks
- **Production-Ready**: Uses the actual async implementation from `randomwalk` package

The async implementation uses static grid snapshots for simplicity and reliability, trading real-time synchronization for predictable, robust parallel execution.

**[Launch the Async Dashboard ‚Üí](../dashboard_async/){.btn .btn-primary}**
